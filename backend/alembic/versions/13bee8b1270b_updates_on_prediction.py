"""updates on prediction

Revision ID: 13bee8b1270b
Revises: 61466ff8aa9b
Create Date: 2025-05-05 13:56:23.176351

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = '13bee8b1270b'
down_revision: Union[str, None] = '61466ff8aa9b'
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('prediction', sa.Column('foul_confidence', sa.Float(), nullable=False))
    op.add_column('prediction', sa.Column('no_foul_confidence', sa.Float(), nullable=False))
    op.add_column('prediction', sa.Column('foul_model_results', sa.String(), nullable=False))
    op.add_column('prediction', sa.Column('severity_model_results', sa.String(), nullable=False))
    op.alter_column(
    'prediction',
    'is_foul',
    existing_type=postgresql.ENUM('NO_FOUL', 'FOUL', name='foulprediction'),
    type_=sa.Boolean(),
    existing_nullable=False,
    postgresql_using="is_foul = 'FOUL'"
)

    op.drop_column('prediction', 'severity')
    op.drop_column('prediction', 'foul_prediction')
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('prediction', sa.Column('foul_prediction', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=False))
    op.add_column('prediction', sa.Column('severity', postgresql.ENUM('NO_CARD', 'RED_CARD', 'YELLOW_CARD', name='severityprediction'), autoincrement=False, nullable=False))
    op.alter_column(
    'prediction',
    'is_foul',
    existing_type=postgresql.ENUM('NO_FOUL', 'FOUL', name='foulprediction'),
    type_=sa.Boolean(),
    existing_nullable=False,
    postgresql_using="is_foul = 'FOUL'"
)

    op.drop_column('prediction', 'severity_model_results')
    op.drop_column('prediction', 'foul_model_results')
    op.drop_column('prediction', 'no_foul_confidence')
    op.drop_column('prediction', 'foul_confidence')
    # ### end Alembic commands ###
